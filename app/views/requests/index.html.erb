<h1 class="display-3 text-primary">Request</h1>

<h3><%= @msg %></h3>


<%#= form_with @user, url: {controller: 'users', action: 'index' } do  |form| %>
<%= form_with(model: @cabinet, url: cabinets_path,local: true) do |f| %>
<%#= form_with(model: @request, local: true) do |f| %> <%# form_with はデフォルトでcabinets_pathを認識、cabinet controllerのnew createに飛ぶことが決定 %>

  <table class="table table-striped table-bordered text-center "> <%# table class="table" 基本のテーブルが作成される＋α %>

    <tr class="table-primary ">
      <th>No.</th><th>File No.</th><th>File Name</th><th>保管期限</th><th>保管場所</th><th>起案者</th><th>起案日</th><th>テスト</th><th>テスト2</th>
    </tr>

    <% @requests.each do |request| %> <%# 一括データ取り出し %>
    <tr>
      <td><%= link_to request.id, request %></td> <%# link_to 文字列, path名。この場合のrequestはrequest_path(request)と同 %>
      <td class="text-left"><%= request.file_no %></td>
      <td class="text-left"><%= request.file_name %></td>
      <td><%= request.expired_at %></td>
      <td><%= request.placed_at %></td>
      <td><%= request.user_id %></td>
      <td><%= request.created_at.to_s(:datetime_jp) %></td> <%# to_sとは配列を文字列に変換するメソッドで、配列の各要素を文字列に変換して連結した文字列を返します。%>
      <td><%= link_to '差し戻し', request, method: :delete, data: { confirm: '本当に削除してよろしいですか？' }, class: 'btn btn-danger' %></td>
      <td><%= link_to '承認', request, method: :create, data: { confirm: '本当にして承認してよろしいですか？' }, class: 'btn btn-primary' %></td>
    </tr>
  
    <% end %>
  </table>

  <%#= form_with @cabinet, url: {controller: 'cabinets', action: 'create' } do  |form| %>
    <%#= form.text_field :name %>
    <%#= f.submit '承認', class: 'btn btn-primary ' %>
  <%# end %>


  <% end %>


<%= paginate @requests %> <%# ページネイトができるようになる %>


